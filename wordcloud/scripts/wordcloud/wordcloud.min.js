(function(){var h=function(){function b(a,k){this.x=a;this.y=k}b.prototype.apply=function(a,k){void 0===k?(this.x+=a.x,this.y+=a.y):(this.x+=a,this.y+=k);return this};b.prototype.sum=function(a){return new b(this.x+a.x,this.y+a.y)};b.prototype.difference=function(a){return new b(this.x-a.x,this.y-a.y)};b.prototype.distance=function(a){a=this.difference(a);return Math.sqrt(a.x*a.x+a.y*a.y)};b.prototype.paint=function(a){a.context.fillStyle="red";a.context.fillRect(this.x,this.y,1,1)};return b}(),n=
function(){function b(a,b){a.sort(function(a,k){var f=a.distance(b),g=k.distance(b);return f<g?-1:f>g?1:0});return a}function a(a){this.coordinates=[];this.width=a.width;this.height=a.height;this.image=a;for(var b=0;b<a.height;b++)for(var c=0;c<a.width;c++){var d=new h(c,b);this.coordinates.push(d)}}a.prototype.filter=function(a,b){a=[];if(0===b)for(var c=0;c<this.coordinates.length;c++){var d=this.coordinates[c];0<this.image.getPixel(d)&&a.push(d)}else a=this.coordinates;return a};a.prototype.getOrderedCoordinates=
function(a,e){var c=this.filter(this.coordinates,e);if(0===a){var d=new h(this.width/2,this.height/2);return b(c,d)}for(var d=c.length,f=null,g=null;0!==d;)g=Math.floor(Math.random()*d),d-=1,f=c[d],c[d]=c[g],c[g]=f;return c};return a}(),p=function(){function b(a){this.raw=a;this.data=a.data;this.width=a.width;this.height=a.height;this.coordinateSet=new n(this)}b.prototype.getPixel=function(a){return this.data[4*(a.y*this.width+a.x)+3]};b.prototype.getOrderedCoordinates=function(a,b){return this.coordinateSet.getOrderedCoordinates(a,
b)};return b}(),m=function(){function b(a,b){this.element=document.createElement("canvas");this.element.width=a;this.element.height=b;this.parent=null;this.context=this.element.getContext("2d")}b.prototype.attach=function(a){document.getElementById(a).appendChild(this.element);this.parent=a;return this};b.prototype.clear=function(){this.context.clearRect(0,0,this.element.width,this.element.height)};b.prototype.writeText=function(a,b,e,c,d,f){void 0===f&&(f=new h(0,0));this.context.textBaseline="top";
this.context.font=c.toString()+" "+b.toString()+"px "+d;this.context.shadowColor="black";this.context.shadowBlur=e?10:0;this.context.fillText(a,f.x,f.y)};b.prototype.writeImage=function(a,b){var e=new h(b.x-a.width/2,b.y-a.height/2);this.context.putImageData(a.raw,e.x,e.y)};b.prototype.readImage=function(a){a=void 0===a?this.context.getImageData(0,0,this.element.width,this.element.height):this.context.getImageData(a.start.x,a.start.y,a.width+1,a.height+1);return new p(a)};return b}(),q=function(){function b(a){this.start=
new h(Infinity,Infinity);this.end=new h(-Infinity,-Infinity);for(var b=0;b<a.height;b++)for(var e=0;e<a.width;e++)0<a.getPixel(new h(e,b))&&(this.start.x=Math.min(this.start.x,e),this.start.y=Math.min(this.start.y,b),this.end.x=Math.max(this.end.x,e),this.end.y=Math.max(this.end.y,b));this.width=this.end.x-this.start.x;this.height=this.end.y-this.start.y}b.prototype.paint=function(a,b){a.context.strokeStyle=b;a.context.strokeRect(this.start.x,this.start.y,this.width,this.height)};return b}(),r=function(){function b(a){this.canvas=
(new m(600,600)).attach(a);this.image=this.readImage()}b.prototype.readImage=function(){return this.canvas.readImage()};b.prototype.readPixel=function(a){return this.image.getPixel(a)};b.prototype.write=function(a,b){this.canvas.writeImage(a,b);this.image=this.readImage()};b.prototype.clear=function(){this.canvas.clear()};b.prototype.intersection=function(a,b){for(var e=0;e<a.length;e++){var c=a[e].sum(b);if(0!==this.readPixel(c))return!0}return!1};b.prototype.getOrderedCoordinates=function(){return this.image.getOrderedCoordinates(0,
1)};return b}(),s=function(){function b(b,e,c,d){var f=10+3*e;this.text=b;this.frequency=e;this.draftImage=a(b,f,!0,c,d);this.finalImage=a(b,f,!1,c,d)}var a=function(a,b,c,d,f){var g=new m(600,200);g.writeText(a,b,c,d,f);a=g.readImage();a=new q(a);return g.readImage(a)};b.prototype.findPosition=function(a){for(var b=this.getOrderedCoordinates(),c=a.getOrderedCoordinates(),d=0;d<c.length;d++){var f=c[d],g=new h(Math.floor(f.x-this.draftImage.width/2),Math.floor(f.y-this.draftImage.height/2));if(!a.intersection(b,
g))return f}return new h(300,300)};b.prototype.paint=function(a){var b=this.findPosition(a);console.log(b.x,b.y);a.write(this.finalImage,b)};b.prototype.getOrderedCoordinates=function(){return this.draftImage.getOrderedCoordinates(1,0)};return b}(),l=function(){function b(a,b,e){this.fontWeight=b;this.fontName=e;this.background=new r(a);this.words=[]}b.prototype.putWord=function(a,b){if(void 0===a||void 0===b)console.error("insufficient arguments");else{var e=new s(a,b,this.fontWeight,this.fontName);
this.words.push(e)}};b.prototype.paint=function(){for(var a=0;a<this.words.length;a++)this.words[a].paint(this.background)};return b}();window.WordCloud=l;window.WordCloud.prototype.paint=l.prototype.paint;window.WordCloud.prototype.putWord=l.prototype.putWord})();
